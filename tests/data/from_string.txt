# FloatFormat: H=IEEEhalf S=IEEEsingle D=IEEEdouble Q=IEEEquad
# Envirnement:
#   Rounding:   E=TiesToEven A=TiesToAway P=TowardsPositive N=TowardsNegative Z=TowardsZero
#   Tininess:   B=Detect before rounding, otherwise detect after
#   Underflow:  U=Always flag, otherwise only if inexact
#   Exponent:   A decimal integer, or S for infinities and NaNs
# Status: K=OK V=Overflow U=Underflow I=Inexact Z=DivByZero X=InvalidOp
# Sign: + or -

# Test format: FloatFormat Env String Status Sign Exponent Significand
#              String Error

#
# Syntax errors
#

1p0          # Missing hex prefix
0xp0         # No significand
0x.p0        # No hex digitsx
0xgp         # Not a hex digit
0x5.6z1      # No hex exponent indicator
0x7.ap       # No exponent digits
0xc.dp-      # No exponent digits
0xc.dp+      # No exponent digits
0xc.dp+a     # Not decimal exponent
0x1.p2z      # Trailing garbage
0x.1p2z      # Trailing garbage
0x2.3p2z     # Trailing garbage
-infinit     # Bad form
infinityz    # Bad form
nant         # Bad form
-snant       # Bad form
sna          # Bad form
.            # No decimal values
1e+          # No exponent digits
1e-          # No exponent digits
1e           # No exponent digits

#
# Zeroes
#

  # Hexadecimal

S E 0x0p0 K + 0 0
Q E 0x0p+0 K + 0 0
H E 0x0.0p-00 K + 0 0
S E 0X00p1 K + 0 0
D E 0x.00000p-1 K + 0 0
S E 0X0.P1000000 K + 0 0
S E 0x.0p-1000000 K + 0 0
Q E -0x0p0 K - 0 0
S E -0x0.p-0 K - 0 0
H E -0x000000000000000000000000000000000.000000000000000000000000000p1000000 K - 0 0
S E -0x.0p-100000000000 K - 0 0

  # Decimal

S E 0 K + 0 0
S E -0 K - 0 0
S E -0.0000 K - 0 0
S E .00000e000 K + 0 0
S E 0e000 K + 0 0


#
# Infinities
#

S E inf K + I 0
D P InF K + I 0
H N INF K + I 0
Q Z InfIniTy K + I 0
S A -inf K - I 0
S E -iNFinitY K - I 0

#
# Quiet NaNs
#

S A nan K + Q 0
S E -nAN K - Q 0
S Z NAN123 K + Q 123
S P -NAN0x123 K - Q 0x123
   # 22 payload bits are kept, 23rd is lost
S N -NAN2345678 K - Q 2345678
S A NAN0x5bcdef I + Q 0x1bcdef

   # Test HDQ formats
   # 9 payload bits are kept, 10th is lost
H E NAN0x123 K + Q 0x123
H Z NAN0x223 I + Q 0x23
   # 51 payload bits are kept, 52nd is lost
D P NAN0x723456789abcd K + Q 0x723456789abcd
D N -NAN0xf23456789abcd I - Q 0x723456789abcd
   # 111 payload bits are kept, 112th is lost
Q E nan0x7234567890123456789012345678 K + Q 0x7234567890123456789012345678
Q E nan0xb234567890123456789012345678 I + Q 0x3234567890123456789012345678

#
# Signalling NaNs
#

S E snan K + S 1
S E -SnAN K - S 1
S E snan0 I + S 1
S E SNAN123 K + S 123
S E -sNAN0x123 K - S 0x123
   # 22 payload bits
S E -SNAN0x2bcdef K - S 0x2bcdef
   # 23 payload bits loses top bit
S E snAN0x5bcdef I + S 0x1bcdef

#
# Normals no rounding
#

  # Hexadecimal

  # Various forms of 1.0 with and without fractions, dots and positive and negative exponents
D E 0x1.0p0 K + -52 4503599627370496
D E 0x2.p-1 K + -52 4503599627370496
D E 0x.4p2 K + -52 4503599627370496
D E 0x10.0p-4 K + -52 4503599627370496
D E 0x8.p-3 K + -52 4503599627370496
D E 0X.1p+4 K + -52 4503599627370496

S E 0x1.5p2 K + -21 11010048
S E 0x1p0 K + -23 8388608
S E 0x1p-126 K + -149 8388608
   # Two most extreme bits set, minimal exponent
D E 0x1.0000000000001p-1022 K + -1074 4503599627370497
   # All bits set, minimal exponent
D E 0x1.fffffffffffffp-1022 K + -1074 9007199254740991

  # Decimal

D E 1 K + -52 4503599627370496
D E -1. K - -52 4503599627370496

#
# Subnormals no rounding
#

S P 0x1p-127 K + -149 4194304
S A 0x1p-128 K + -149 2097152
S AU 0x1p-128 U + -149 2097152
S ABU 0x1p-128 U + -149 2097152
S AB 0x1p-128 K + -149 2097152
S E -0x1p-149 K - -149 1
S Z -0x1p-149 K - -149 1
S ZU -0x1p-149 U - -149 1
D E 0x1p-1074 K + -1074 1
D E 0x1.0000000000002p-1023 K + -1074 2251799813685249
D EU 0x1.0000000000002p-1023 U + -1074 2251799813685249
   # Other formats
H E 0x1p-24 K + -24 1
Q E 0x1p-16494 K + -16494 1

#
# Subnormals rounding.  Test many rounding modes and env settings
#

D E 0x1.fffffffffffffp-1023 I + -1074 0x10000000000000
D A 0x1.fffffffffffffp-1023 I + -1074 0x10000000000000
D P 0x1.fffffffffffffp-1023 I + -1074 0x10000000000000
D Z 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff
D N 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff

D EB 0x1.fffffffffffffp-1023 UI + -1074 0x10000000000000
D AB 0x1.fffffffffffffp-1023 UI + -1074 0x10000000000000
D PB 0x1.fffffffffffffp-1023 UI + -1074 0x10000000000000
D ZB 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff
D NB 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff

D EBU 0x1.fffffffffffffp-1023 UI + -1074 0x10000000000000
D ABU 0x1.fffffffffffffp-1023 UI + -1074 0x10000000000000
D PBU 0x1.fffffffffffffp-1023 UI + -1074 0x10000000000000
D ZBU 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff
D NBU 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff

D EU 0x1.fffffffffffffp-1023 I + -1074 0x10000000000000
D AU 0x1.fffffffffffffp-1023 I + -1074 0x10000000000000
D PU 0x1.fffffffffffffp-1023 I + -1074 0x10000000000000
D ZU 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff
D NU 0x1.fffffffffffffp-1023 UI + -1074 0xfffffffffffff

D E -0x1.fffffffffffffp-1023 I - -1074 0x10000000000000
D A -0x1.fffffffffffffp-1023 I - -1074 0x10000000000000
D P -0x1.fffffffffffffp-1023 UI - -1074 0xfffffffffffff
D Z -0x1.fffffffffffffp-1023 UI - -1074 0xfffffffffffff
D N -0x1.fffffffffffffp-1023 I - -1074 0x10000000000000

D E 0x1.0000000000001p-1023 UI + -1074 0x8000000000000
D A 0x1.0000000000001p-1023 UI + -1074 0x8000000000001
D P 0x1.0000000000001p-1023 UI + -1074 0x8000000000001
D Z 0x1.0000000000001p-1023 UI + -1074 0x8000000000000
D N 0x1.0000000000001p-1023 UI + -1074 0x8000000000000

D E 0x1.0000000000003p-1023 UI + -1074 0x8000000000002
D A 0x1.0000000000003p-1023 UI + -1074 0x8000000000002
D P 0x1.0000000000003p-1023 UI + -1074 0x8000000000002
D Z 0x1.0000000000003p-1023 UI + -1074 0x8000000000001
D N 0x1.0000000000003p-1023 UI + -1074 0x8000000000001

D E -0x1.0000000000001p-1023 UI - -1074 0x8000000000000
D A -0x1.0000000000001p-1023 UI - -1074 0x8000000000001
D P -0x1.0000000000001p-1023 UI - -1074 0x8000000000000
D Z -0x1.0000000000001p-1023 UI - -1074 0x8000000000000
D N -0x1.0000000000001p-1023 UI - -1074 0x8000000000001

D E -0x1.0000000000003p-1023 UI - -1074 0x8000000000002
D A -0x1.0000000000003p-1023 UI - -1074 0x8000000000002
D P -0x1.0000000000003p-1023 UI - -1074 0x8000000000001
D Z -0x1.0000000000003p-1023 UI - -1074 0x8000000000001
D N -0x1.0000000000003p-1023 UI - -1074 0x8000000000002

# Other formats
H E 0x1.ffcp-15 I + -24 0x400
S E 0x1.fffffep-127 I + -149 0x800000
Q E 0x1.ffffffffffffffffffffffffffffp-16383 I + -16494 0x10000000000000000000000000000
